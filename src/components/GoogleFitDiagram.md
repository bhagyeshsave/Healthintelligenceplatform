# Google Fit Integration Architecture

## Visual Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        THRYVE DIGITAL HEALTH TWIN                       â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Profile Page                              â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚         Google Fit Integration Component                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  [NOT CONNECTED STATE]                                      â”‚ â”‚ ï¿½ï¿½
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸƒ Google Fit Integration          â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                    â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ What you'll get:                   â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ âœ“ Daily step count                 â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ âœ“ Heart rate monitoring            â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ âœ“ Sleep duration                   â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ âœ“ Active minutes                   â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                    â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ [Connect Google Fit Button]        â”‚ â”€â”€â”€â”€â”€â”             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                               â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  [CONNECTED STATE]                            â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸƒ Google Fit Integration          â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    [Connected Badge] [Refresh â†»]   â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                    â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â”‚Steps â”‚ â”‚ HR   â”‚ â”‚ Cal  â”‚ â”‚Sleep â”‚â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â”‚12.8K â”‚ â”‚72bpm â”‚ â”‚2.3K  â”‚ â”‚7.2h  â”‚â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                    â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Distance: 8.5 km | Active: 87 min â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                    â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Last sync: 2 mins ago [Disconnect] â”‚      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                                         â”‚
                                  â”‚                                      â”‚
                                  â”‚ User clicks "Connect Google Fit"     â”‚
                                  â–¼                                      â”‚
                                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OAUTH 2.0 POPUP WINDOW                          â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ”’ Sign in with Google                                           â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  accounts.google.com/o/oauth2/v2/auth                            â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Email: user@gmail.com                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Password: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  [Sign In Button]                                           â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  Thryve wants to access:                                          â”‚ â”‚
â”‚  â”‚  âœ“ Read your activity data (steps, distance)                     â”‚ â”‚
â”‚  â”‚  âœ“ Read your heart rate data                                     â”‚ â”‚
â”‚  â”‚  âœ“ Read your sleep data                                          â”‚ â”‚
â”‚  â”‚  âœ“ Read your location data                                       â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  [Allow] [Deny]                                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ User grants permission
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OAUTH CALLBACK (URL HASH)                            â”‚
â”‚                                                                         â”‚
â”‚  https://yourdomain.com/profile#access_token=ya29.a0AfH6...&           â”‚
â”‚  token_type=Bearer&expires_in=3600&scope=fitness.activity...           â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  JavaScript extracts:                                           â”‚   â”‚
â”‚  â”‚  â€¢ access_token: "ya29.a0AfH6SMDKj..."                          â”‚   â”‚
â”‚  â”‚  â€¢ expires_in: 3600 (1 hour)                                    â”‚   â”‚
â”‚  â”‚  â€¢ scope: "fitness.activity.read ..."                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Token saved to localStorage
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LOCAL STORAGE                                   â”‚
â”‚                                                                         â”‚
â”‚  Key: google_fit_access_token                                           â”‚
â”‚  Value: "ya29.a0AfH6SMDKj..."                                           â”‚
â”‚                                                                         â”‚
â”‚  Key: google_fit_token_expiry                                           â”‚
â”‚  Value: "1732752000000" (timestamp)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Fetch Google Fit data
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     API REQUEST TO YOUR BACKEND                         â”‚
â”‚                                                                         â”‚
â”‚  GET https://ombjteysx3.execute-api.us-east-1.amazonaws.com/prod/fetch â”‚
â”‚                                                                         â”‚
â”‚  Headers:                                                               â”‚
â”‚  â”œâ”€ Authorization: Bearer ya29.a0AfH6SMDKj...                           â”‚
â”‚  â””â”€ Content-Type: application/json                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         YOUR BACKEND SERVER                             â”‚
â”‚                     (AWS Lambda / Node.js / etc.)                       â”‚
â”‚                                                                         â”‚
â”‚  1. Receive request with access_token                                   â”‚
â”‚     â”œâ”€ Extract token from Authorization header                          â”‚
â”‚     â””â”€ Parse: "Bearer ya29.a0AfH6SMDKj..."                              â”‚
â”‚                                                                         â”‚
â”‚  2. Validate token with Google                                          â”‚
â”‚     â”œâ”€ POST https://oauth2.googleapis.com/tokeninfo                     â”‚
â”‚     â”œâ”€ Verify token is valid and not expired                            â”‚
â”‚     â””â”€ Check audience (aud) matches your Client ID                      â”‚
â”‚                                                                         â”‚
â”‚  3. Fetch data from Google Fit API                                      â”‚
â”‚     â”œâ”€ GET fitness/v1/users/me/dataset:aggregate                        â”‚
â”‚     â”œâ”€ Authorization: Bearer ya29.a0AfH6SMDKj...                        â”‚
â”‚     â”œâ”€ Request steps, heart rate, sleep, calories                       â”‚
â”‚     â””â”€ Process response data                                            â”‚
â”‚                                                                         â”‚
â”‚  4. Transform and return data                                           â”‚
â”‚     â””â”€ Format as JSON matching frontend interface                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Return formatted data
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API RESPONSE (JSON)                             â”‚
â”‚                                                                         â”‚
â”‚  {                                                                      â”‚
â”‚    "steps": 12847,                                                      â”‚
â”‚    "heartRate": 72,                                                     â”‚
â”‚    "calories": 2340,                                                    â”‚
â”‚    "distance": 8540,                                                    â”‚
â”‚    "activeMinutes": 87,                                                 â”‚
â”‚    "sleep": {                                                           â”‚
â”‚      "duration": 432,                                                   â”‚
â”‚      "quality": "Good"                                                  â”‚
â”‚    }                                                                    â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ Display in UI
                                  â–¼
                                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND DISPLAYS DATA                               â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸƒ Google Fit Integration [Connected] [â†»]                      â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ‘£      â”‚  â”‚ â¤ï¸      â”‚  â”‚ âš¡      â”‚  â”‚ ğŸŒ™      â”‚           â”‚    â”‚
â”‚  â”‚  â”‚ Steps   â”‚  â”‚ Heart   â”‚  â”‚ Caloriesâ”‚  â”‚ Sleep   â”‚           â”‚    â”‚
â”‚  â”‚  â”‚ 12,847  â”‚  â”‚ 72 bpm  â”‚  â”‚ 2,340   â”‚  â”‚ 7.2h    â”‚           â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  Distance: 8.54 km  |  Active Minutes: 87 min                  â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  ğŸ“… Last synced: 2 mins ago          [âŒ Disconnect]           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚  Data is now integrated into Digital Health Twin:                      â”‚
â”‚  â€¢ Step count â†’ Activity tracking                                      â”‚
â”‚  â€¢ Heart rate â†’ Cardiovascular health score                            â”‚
â”‚  â€¢ Sleep â†’ Recovery & wellness metrics                                 â”‚
â”‚  â€¢ Calories â†’ Metabolic health indicators                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App.tsx
â””â”€ UserProfile.tsx (Profile Tab)
   â”œâ”€ Profile Card
   â”œâ”€ Contact Information
   â”œâ”€ Emergency Contacts
   â”œâ”€ SOS Alert System
   â”œâ”€ Connected Devices (ABHA, etc.)
   â”œâ”€ GoogleFitIntegration.tsx â­ NEW
   â”‚  â”œâ”€ Not Connected State
   â”‚  â”‚  â”œâ”€ Info Card
   â”‚  â”‚  â”œâ”€ Benefits List
   â”‚  â”‚  â””â”€ Connect Button
   â”‚  â”‚
   â”‚  â””â”€ Connected State
   â”‚     â”œâ”€ Header (Badge + Refresh)
   â”‚     â”œâ”€ Metrics Grid (4 cards)
   â”‚     â”œâ”€ Additional Stats
   â”‚     â””â”€ Footer (Sync time + Disconnect)
   â”‚
   â”œâ”€ Insurance Details
   â””â”€ Privacy Settings
```

## State Management

```typescript
// Component State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GoogleFitIntegration State         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isConnected: boolean                â”‚
â”‚ isLoading: boolean                  â”‚
â”‚ accessToken: string | null          â”‚
â”‚ googleFitData: GoogleFitData | null â”‚
â”‚ error: string | null                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ localStorage
         â”‚  â”œâ”€ google_fit_access_token
         â”‚  â””â”€ google_fit_token_expiry
         â”‚
         â””â”€ API Communication
            â””â”€ fetch(apiEndpoint, { Authorization })
```

## Error Handling Flow

```
User Action
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try OAuth       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ Success â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Popup Blocked?  â”‚â—„â”€â”€â”€â”€ Show: "Allow popups" error
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User Cancelled? â”‚â—„â”€â”€â”€â”€ Show: "Authorization cancelled"
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Token Received  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Try Fetch Data  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ API Error?      â”‚â—„â”€â”€â”€â”€ Show: "Failed to fetch data"
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Invalid Token?  â”‚â—„â”€â”€â”€â”€ Show: "Please reconnect"
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Display Data âœ… â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
thryve-app/
â”œâ”€ components/
â”‚  â”œâ”€ GoogleFitIntegration.tsx â­ Main component
â”‚  â”œâ”€ UserProfile.tsx (updated with import)
â”‚  â””â”€ ui/
â”‚     â”œâ”€ button.tsx
â”‚     â”œâ”€ badge.tsx
â”‚     â””â”€ ...
â”‚
â”œâ”€ utils/
â”‚  â””â”€ googleFitAuth.ts â­ Auth utilities
â”‚
â”œâ”€ docs/
â”‚  â”œâ”€ GOOGLE_FIT_SETUP.md â­ Setup guide
â”‚  â”œâ”€ IMPLEMENTATION_SUMMARY.md â­ Quick reference
â”‚  â””â”€ GoogleFitDiagram.md â­ This file
â”‚
â””â”€ .env (add your secrets)
   â””â”€ NEXT_PUBLIC_GOOGLE_CLIENT_ID=...
```

---

**Quick Start**: Update Client ID â†’ Test OAuth â†’ View Data  
**Status**: âœ… Ready for configuration  
**Location**: Profile Tab â†’ Google Fit Integration section
